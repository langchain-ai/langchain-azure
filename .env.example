# =============================================================================
# Azure AI Foundry Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# IMPORTANT: Never commit .env files to version control
#
# Last Updated: 2026-01-24
# Version: 1.0.0
# =============================================================================

# =============================================================================
# REQUIRED: Azure AI Foundry Configuration
# =============================================================================
# Azure AI Foundry Project Endpoint (REQUIRED for all Azure AI Agent Service features)
# Find this at: https://ai.azure.com → Your Project → Settings → Project endpoint
# Format: https://<resource-name>.services.ai.azure.com/api/projects/<project-id>
AZURE_AI_PROJECT_ENDPOINT=

# =============================================================================
# REQUIRED: Azure OpenAI Configuration
# =============================================================================
# Azure OpenAI API Key
# Find at: Azure Portal → Your Azure OpenAI Resource → Keys and Endpoint
AZURE_OPENAI_API_KEY=

# Azure OpenAI Endpoint
# Format: https://<your-resource-name>.openai.azure.com/
# Find at: Azure Portal → Your Azure OpenAI Resource → Keys and Endpoint
AZURE_OPENAI_ENDPOINT=

# Azure OpenAI Chat Model Deployment Name
# This is your DEPLOYMENT NAME (not the base model name)
# Find at: Azure Portal → Azure OpenAI Resource → Model deployments
# Example: If you deployed gpt-4o and named it "gpt-4o-prod", use "gpt-4o-prod"
AZURE_OPENAI_DEPLOYMENT_NAME=

# Azure OpenAI Embedding Model Deployment Name (for vector embeddings)
# Deploy text-embedding-3-small or text-embedding-ada-002 first
# Example: If you deployed text-embedding-3-small and named it "embeddings", use "embeddings"
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=

# Azure OpenAI API Version
# o4-mini requires: 2024-12-01-preview or later
# For older models use: 2024-08-01-preview
# Reference: https://learn.microsoft.com/azure/ai-services/openai/reference
OPENAI_API_VERSION=2024-12-01-preview

# Alternative variable name (for compatibility)
AZURE_OPENAI_API_VERSION=2024-12-01-preview

# =============================================================================
# OPTIONAL: Alternative LLM Providers
# =============================================================================
# OpenAI API Configuration (Disabled by default - use Azure OpenAI for production)
# Only enable if Azure is not available
OPENAI_API_KEY=
OPENAI_ENABLED=false

# Anthropic (Claude) API Configuration (Fallback option)
ANTHROPIC_API_KEY=

# =============================================================================
# REQUIRED FOR OBSERVABILITY: LangSmith Configuration
# =============================================================================
# Enable LangSmith tracing for debugging and monitoring
# Set to "true" to enable comprehensive observability
LANGCHAIN_TRACING_V2=true

# LangSmith API Key
# Get from: https://smith.langchain.com → Settings → API Keys
LANGCHAIN_API_KEY=

# LangSmith Project Name (for organizing traces)
# Create projects at: https://smith.langchain.com
LANGCHAIN_PROJECT=azure-foundry-agents

# LangSmith Endpoint (default, usually no need to change)
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com

# =============================================================================
# RECOMMENDED: Azure Application Insights (for telemetry and monitoring)
# =============================================================================
# Application Insights Connection String
# Find at: Azure Portal → Application Insights → Overview → Connection String
# Format: InstrumentationKey=xxx;IngestionEndpoint=https://...;LiveEndpoint=https://...
APPLICATIONINSIGHTS_CONNECTION_STRING=

# Enable OpenTelemetry tracing to Application Insights
OTEL_TRACES_EXPORTER=azure_monitor
OTEL_LOGS_EXPORTER=azure_monitor
OTEL_METRICS_EXPORTER=azure_monitor

# =============================================================================
# OPTIONAL: Azure AI Services Tools Configuration
# =============================================================================
# Azure AI Document Intelligence
# Find at: Azure Portal → Document Intelligence → Keys and Endpoint
AZURE_DOCUMENT_INTELLIGENCE_KEY=
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=

# Azure AI Text Analytics
# Find at: Azure Portal → Language Service → Keys and Endpoint
AZURE_TEXT_ANALYTICS_KEY=
AZURE_TEXT_ANALYTICS_ENDPOINT=

# Azure AI Vision / Computer Vision
# Find at: Azure Portal → Computer Vision → Keys and Endpoint
AZURE_COMPUTER_VISION_KEY=
AZURE_COMPUTER_VISION_ENDPOINT=

# =============================================================================
# OPTIONAL: Azure Storage Configuration (for document loaders)
# =============================================================================
# Azure Storage Account URL and Container
AZURE_STORAGE_ACCOUNT_URL=
AZURE_STORAGE_CONTAINER_NAME=
AZURE_STORAGE_BLOB_PREFIX=

# Azure Storage Account Key (if not using Managed Identity)
AZURE_STORAGE_ACCOUNT_KEY=

# =============================================================================
# OPTIONAL: Azure AI Search Configuration (for RAG/vector search)
# =============================================================================
# Azure AI Search Endpoint and Key
AZURE_AI_SEARCH_ENDPOINT=
AZURE_AI_SEARCH_KEY=
AZURE_AI_SEARCH_INDEX_NAME=

# =============================================================================
# OPTIONAL: Azure Cosmos DB Configuration (for chat history/vector stores)
# =============================================================================
# Cosmos DB Connection String
AZURE_COSMOS_CONNECTION_STRING=
AZURE_COSMOS_DATABASE_NAME=
AZURE_COSMOS_CONTAINER_NAME=

# =============================================================================
# OPTIONAL: External Tools and Services
# =============================================================================
# Tavily Search API (for web search capabilities)
# Get key at: https://tavily.com
TAVILY_API_KEY=

# =============================================================================
# SECURITY: API Authentication Configuration
# =============================================================================
# Enable API key authentication for production
# Set to "true" for production, "false" only for local development
API_KEY_ENABLED=true

# API Key for webhook and endpoint authentication
# Generate a secure key with: openssl rand -hex 32
# REQUIRED when API_KEY_ENABLED=true
API_KEY=

# CORS Origins (comma-separated, NEVER use "*" in production)
# Add your production domains
# For ngrok: Add your ngrok URL (e.g., https://your-subdomain.ngrok-free.dev)
CORS_ORIGINS=http://localhost:8000,http://localhost:3000

# =============================================================================
# SECURITY: Azure AD / Entra ID Authentication (Optional)
# =============================================================================
# Enable Azure AD authentication
AUTH_ENABLED=false

# Allow bypass in development (use dev user without real auth)
AUTH_BYPASS_DEV=true

# Azure AD Tenant ID
# Find at: Azure Portal → Azure Active Directory → Overview
AZURE_TENANT_ID=

# Azure AD Application/Client ID
# Find at: Azure Portal → App Registrations → Your App → Overview
AZURE_CLIENT_ID=

# Azure AD Client Secret
# Find at: Azure Portal → App Registrations → Your App → Certificates & secrets
AZURE_CLIENT_SECRET=

# OAuth Callback URL (must match App Registration redirect URI)
AZURE_REDIRECT_URI=http://localhost:8000/auth/callback

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================
# Default LLM provider for agents
# Options: azure_openai (primary), openai, anthropic, auto
# Leave empty for auto-detection (recommended)
ENTERPRISE_AGENT_PROVIDER=azure_openai

# Default model/deployment for agents
# For Azure: Use your deployment name (e.g., gpt-4o, gpt-4o-mini)
# For OpenAI: gpt-4o-mini, gpt-4o, o3-mini
ENTERPRISE_AGENT_MODEL=gpt-4o

# =============================================================================
# MEMORY AND PERSISTENCE CONFIGURATION
# =============================================================================
# Memory backend: "postgres", "sqlite", or "memory" (default: memory)
MEMORY_BACKEND=memory

# PostgreSQL connection string (required if MEMORY_BACKEND=postgres)
# Format: postgresql://user:password@host:port/database
# DATABASE_URL=postgresql://langchain:password@localhost:5432/langchain_agents

# SQLite path (optional, defaults to ./data/checkpoints.db)
# DATABASE_URL=sqlite:///./data/checkpoints.db

# PostgreSQL connection pool settings
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# =============================================================================
# SEMANTIC MEMORY CONFIGURATION
# =============================================================================
# Enable semantic long-term memory
SEMANTIC_MEMORY_ENABLED=false

# Embedding provider for semantic memory
# Options: "azure_openai" (primary), "openai", "huggingface"
# Leave empty for auto-detection
EMBEDDING_PROVIDER=azure_openai

# Semantic memory storage path (for FAISS/Chroma persistence)
SEMANTIC_MEMORY_PATH=./data/semantic_memory
CHROMA_PERSIST_DIR=./chroma_db

# =============================================================================
# CONVERSATION SETTINGS
# =============================================================================
# Number of messages before triggering automatic summarization
CONVERSATION_SUMMARY_THRESHOLD=10

# Maximum tokens before summarization (approximate)
MAX_TOKENS_BEFORE_SUMMARY=4000

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
# Server port (default: 8000)
PORT=8000

# LangGraph Server URL (if running separately)
LANGGRAPH_SERVER_URL=http://localhost:8123

# Default model for LangGraph agents
LANGGRAPH_DEFAULT_MODEL=azure_openai

# =============================================================================
# MICROSOFT TEAMS INTEGRATION (Optional)
# =============================================================================
# Enable JWT verification for Teams webhooks
TEAMS_JWT_VERIFICATION=true

# Microsoft Teams Bot App ID and Password
# Find at: Azure Portal → Bot registration
TEAMS_APP_ID=
TEAMS_APP_PASSWORD=

# =============================================================================
# SERVICENOW INTEGRATION (Optional)
# =============================================================================
# ServiceNow instance name (e.g., "dev12345" for dev12345.service-now.com)
SERVICENOW_INSTANCE=

# ServiceNow API credentials
SERVICENOW_USERNAME=
SERVICENOW_PASSWORD=

# Operation mode: "live" or "simulation" (default: simulation for safety)
SERVICENOW_MODE=simulation

# Request timeout in seconds
SERVICENOW_TIMEOUT=30

# SSL verification (set to "false" for dev instances with self-signed certs)
SERVICENOW_VERIFY_SSL=true

# =============================================================================
# DOCUMENT PROCESSING CONFIGURATION
# =============================================================================
# Allowed domains for web search (comma-separated)
# Example: docs.python.org,stackoverflow.com,github.com
ALLOWED_SEARCH_DOMAINS=

# Tesseract OCR executable path (Windows only, if not in PATH)
# Example: C:\Program Files\Tesseract-OCR\tesseract.exe
TESSERACT_CMD=

# Document chunking settings
DOC_CHUNK_SIZE=1000
DOC_CHUNK_OVERLAP=200

# Default target language for translations
DEFAULT_TARGET_LANGUAGE=en

# =============================================================================
# DEVELOPMENT AND DEBUGGING
# =============================================================================
# Python log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Enable debug mode (additional logging)
DEBUG=false

# Enable verbose output
VERBOSE=false

# =============================================================================
# NOTES AND SECURITY REMINDERS
# =============================================================================
# 1. NEVER commit this file with actual secrets to version control
# 2. Use Azure Key Vault or similar for production secrets management
# 3. Rotate API keys regularly (every 90 days recommended)
# 4. Use Managed Identity when possible instead of API keys
# 5. Enable API_KEY_ENABLED=true for all production deployments
# 6. Review CORS_ORIGINS and whitelist only trusted domains
# 7. Enable AUTH_ENABLED=true for production with real Azure AD
# 8. Set AUTH_BYPASS_DEV=false in production environments
# 9. Monitor Application Insights for security anomalies
# 10. Keep this file updated with your actual configuration structure
#
# For production deployment checklist, see: docs/SECURITY.md
# =============================================================================
